# ‚úÖ APR√àS LA MIGRATION - Guide Post-Ex√©cution

**Ce guide explique ce qu'il faut faire APR√àS avoir ex√©cut√© la migration**

---

## üéØ Imm√©diatement apr√®s la migration

### 1Ô∏è‚É£ V√©rifications rapides (2 minutes)

```bash
# V√©rification 1: Le dossier a √©t√© renomm√©?
test -d pharmacie-campguezo-cotonou.messoins.bj && echo "‚úÖ Dossier renomm√©" || echo "‚ùå Dossier manquant!"

# V√©rification 2: Nouveau branding appliqu√©?
grep -r 'data-theme="messoins"' pharmacie-campguezo-cotonou.messoins.bj/ | wc -l
# Attendu: 1000+

# V√©rification 3: Ancien domaine supprim√©?
grep -r "pharmaciecourcelles-demours-paris" pharmacie-campguezo-cotonou.messoins.bj/ | wc -l
# Attendu: 0

# V√©rification 4: Ancien CDN supprim√©?
grep -r "https://cdn\.mesoigner\.fr" pharmacie-campguezo-cotonou.messoins.bj/ | wc -l
# Attendu: 0
```

### Si toutes les v√©rifications r√©ussissent:
```bash
echo "‚úÖ Migration r√©ussie! Passer √† l'√©tape suivante"
```

### Si une v√©rification √©choue:
```bash
# Voir la section "Probl√®mes" ci-dessous
```

---

## üß™ Test local complet (5 minutes)

### D√©marrer le serveur
```bash
php artisan serve
```

Vous devez voir:
```
   INFO  Server running on [http://127.0.0.1:8000].
```

### Tester dans le navigateur

**Ouvrir:**
```
http://localhost:8000/pharmacie-campguezo-cotonou.messoins.bj/index.html
```

### Points de v√©rification visuels

- [ ] **Page charge** - Pas d'erreur 500 ou blanc
- [ ] **Logo visible** - En haut √† gauche (messoins)
- [ ] **CSS charg√©** - Page bien stylis√©e, pas d'alarme visuelle
- [ ] **Images s'affichent** - Pas de petits carr√©s cass√©s
- [ ] **Menu r√©pond** - Cliquer sur "M√©dicaments" fonctionne
- [ ] **Formulaire de recherche** - Peut cliquer dans la barre
- [ ] **Footer visible** - En bas de page

### Tester la console (F12)

1. Appuyer sur **F12**
2. Aller √† l'onglet **Console**
3. Chercher les **erreurs rouges**
4. Chercher les **404** (ressources manquantes)

**R√©sultat attendu:**
- Aucune erreur rouge
- Aucun 404 pour les assets
- Peut y avoir des avertissements (warn) - c'est OK

### Tester les pages principales

```bash
# Via le terminal, v√©rifier quelques pages
curl -s http://localhost:8000/pharmacie-campguezo-cotonou.messoins.bj/index.html | grep -q "data-theme=\"messoins\"" && echo "‚úÖ index.html OK"
curl -s http://localhost:8000/pharmacie-campguezo-cotonou.messoins.bj/connexion.html | grep -q "data-theme=\"messoins\"" && echo "‚úÖ connexion.html OK"
curl -s http://localhost:8000/pharmacie-campguezo-cotonou.messoins.bj/inscription.html | grep -q "data-theme=\"messoins\"" && echo "‚úÖ inscription.html OK"
```

### Arr√™ter le serveur
```
Ctrl + C
```

---

## ‚öôÔ∏è Configuration Laravel

### Si le site n'affiche pas correctement:

#### V√©rifier config/app.php
```php
'url' => env('APP_URL', 'https://pharmacie-campguezo-cotonou.messoins.bj'),
'asset_url' => env('ASSET_URL', 'https://pharmacie-campguezo-cotonou.messoins.bj'),
```

#### V√©rifier .env
```env
APP_URL=https://pharmacie-campguezo-cotonou.messoins.bj
ASSET_URL=https://pharmacie-campguezo-cotonou.messoins.bj
```

#### Mettre en cache la config
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

---

## üìÅ V√©rifier la structure des fichiers

### V√©rifier que les fichiers cl√©s existent
```bash
# CSS doit exister
test -f public/assets/css/scripts.3e902af8.css && echo "‚úÖ scripts.css" || echo "‚ùå scripts.css manquant"
test -f public/assets/css/mesoigner.6063c722.css && echo "‚úÖ mesoigner.css" || echo "‚ùå mesoigner.css manquant"

# Dossier uploads doit exister
test -d public/assets/uploads && echo "‚úÖ uploads/" || echo "‚ùå uploads/ manquant"

# HTML files doit exister
test -d pharmacie-campguezo-cotonou.messoins.bj && echo "‚úÖ Dossier HTML" || echo "‚ùå Dossier manquant"
```

---

## üîç Recherches et v√©rifications avanc√©es

### Chercher les URL qui pourraient encore avoir l'ancien domaine
```bash
# Chercher dans les fichiers JSON
grep -r "pharmaciecourcelles" pharmacie-campguezo-cotonou.messoins.bj/*.json 2>/dev/null | head -5

# Chercher dans les fichiers PHP
grep -r "pharmaciecourcelles" pharmacie-campguezo-cotonou.messoins.bj/*.php 2>/dev/null | head -5

# Chercher des patterns de CDN cass√©s
grep -r "cdn\.mesoigner" pharmacie-campguezo-cotonou.messoins.bj/ | head -5

# Chercher les chemins relatifs probl√©matiques
grep -r "\.\./cdn\." pharmacie-campguezo-cotonou.messoins.bj/ | head -5
```

### Chercher les images lazy-loading qui ne seraient pas √† jour
```bash
# Chercher data-src avec ancien domaine
grep -r 'data-src.*pharmaciecourcelles' pharmacie-campguezo-cotonou.messoins.bj/ | head -3

# Chercher data-src avec ancien CDN
grep -r 'data-src.*cdn\.mesoigner' pharmacie-campguezo-cotonou.messoins.bj/ | head -3
```

---

## üêõ Probl√®mes courants et solutions

### Probl√®me 1: Les CSS ne chargent pas

**Sympt√¥mes:** Aucun style, page blanche ou mal stylis√©e

**Solution:**
```bash
# V√©rifier que les fichiers CSS existent
ls -lh public/assets/css/

# S'ils sont vides, c'est normal. V√©rifier le chemin dans HTML:
grep -n "href.*assets/css" pharmacie-campguezo-cotonou.messoins.bj/index.html | head -3

# Le chemin doit √™tre /assets/css/... (avec slash initial)
# Si c'est ../assets/css/... c'est un probl√®me
```

### Probl√®me 2: Les images ne s'affichent pas

**Sympt√¥mes:** Petits carr√©s cass√©s ou images manquantes

**Solution:**
```bash
# V√©rifier les URLs d'images
grep -r "<img" pharmacie-campguezo-cotonou.messoins.bj/index.html | grep -o 'src="[^"]*"' | head -5

# Elles doivent √™tre soit:
# - /assets/uploads/... (local)
# - https://pharmacie-campguezo-cotonou.messoins.bj/media/... (CDN)
# - /fonts/... (pour les icones SVG)
```

### Probl√®me 3: Le logo n'affiche pas

**Sympt√¥mes:** Pas d'image en haut √† gauche

**Solution:**
```bash
# V√©rifier que le logo est correct
grep -r "logo-messoins" pharmacie-campguezo-cotonou.messoins.bj/index.html | head -3

# V√©rifier le chemin
# Doit √™tre: /assets/uploads/logo-messoins.svg
# OU: https://pharmacie-campguezo-cotonou.messoins.bj/media/...

# Cr√©er un logo vide si manquant (placeholder):
echo '<svg></svg>' > public/assets/uploads/logo-messoins.svg
```

### Probl√®me 4: data-theme n'est pas bon

**Sympt√¥mes:** Les couleurs ne sont pas correctes

**Solution:**
```bash
# V√©rifier que tous les headers ont data-theme="messoins"
grep -c 'data-theme="messoins"' pharmacie-campguezo-cotonou.messoins.bj/index.html
# Attendu: au moins 1

# S'il y en a 0, faire un remplacement manuel
sed -i 's/data-theme="mesoigner"/data-theme="messoins"/g' \
  pharmacie-campguezo-cotonou.messoins.bj/index.html
```

### Probl√®me 5: Les URLs restent mal

**Sympt√¥mes:** Certains liens pointent vers l'ancien domaine

**Solution:**
```bash
# Trouver les mauvaises URLs
grep -r "pharmaciecourcelles-demours-paris" pharmacie-campguezo-cotonou.messoins.bj/ | head -5

# Remplacer manuellement
sed -i 's/pharmaciecourcelles-demours-paris\.mesoigner\.fr/pharmacie-campguezo-cotonou.messoins.bj/g' \
  pharmacie-campguezo-cotonou.messoins.bj/fichier.html
```

---

## ‚úÖ Checklist post-migration

### V√©rifications
- [ ] `grep -r 'data-theme="messoins"'` retourne 1000+
- [ ] `grep -r 'pharmaciecourcelles-demours-paris'` retourne 0
- [ ] `grep -r 'https://cdn\.mesoigner\.fr'` retourne 0
- [ ] `public/assets/css/` contient les 2 fichiers CSS
- [ ] `php artisan serve` marche sans erreur
- [ ] Page s'affiche dans le navigateur
- [ ] Logo visible
- [ ] Aucune erreur 404 en console (F12)
- [ ] Aucune erreur rouge en console
- [ ] Menus fonctionnent

### Configuration
- [ ] `config/app.php` mis √† jour (si n√©cessaire)
- [ ] `.env` mis √† jour (si n√©cessaire)
- [ ] `php artisan config:cache` ex√©cut√©

### Tests
- [ ] Accueil charge
- [ ] Connexion charge
- [ ] Inscription charge
- [ ] Recherche fonctionne
- [ ] Menu fonctionne
- [ ] Footer s'affiche

---

## üöÄ Prochaines √©tapes (Avant production)

### 1. Mettre en cache
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### 2. V√©rifier les assets compil√©s
```bash
# Si vous utilisez Laravel Mix:
npm run production
# Ou Vite:
npm run build
```

### 3. V√©rifier la base de donn√©es (si applicable)
```bash
# Si vous devez mettre √† jour les URLs en base:
php artisan migrate
# Ou faire un search/replace sur les tables
```

### 4. Tester en staging
```bash
# D√©ployer sur un serveur de test
# V√©rifier que tout fonctionne
# V√©rifier les logs
```

### 5. Mettre √† jour le DNS (avant de passer en production)
```bash
# Faire pointer le domaine vers le serveur
# Attendre la propagation DNS (jusqu'√† 24h)
# V√©rifier avec: nslookup pharmacie-campguezo-cotonou.messoins.bj
```

### 6. Configurer SSL/TLS
```bash
# G√©n√©rer certificat SSL (Let's Encrypt recommand√©)
# Configurer nginx/Apache pour HTTPS
# Faire redirection HTTP ‚Üí HTTPS
```

### 7. Deployment final
```bash
# D√©ployer en production
# V√©rifier les logs
# Tester dans navigateur
# Monitorer les erreurs
```

---

## üìä V√©rification d'int√©grit√©

### Cr√©er un rapport complet
```bash
#!/bin/bash

echo "========================================="
echo "RAPPORT DE MIGRATION"
echo "========================================="
echo ""

# Fichiers trait√©s
html_count=$(find pharmacie-campguezo-cotonou.messoins.bj -name "*.html" -type f | wc -l)
echo "‚úÖ Fichiers HTML: $html_count"

# Nouveau branding
messoins=$(grep -r 'data-theme="messoins"' pharmacie-campguezo-cotonou.messoins.bj/ 2>/dev/null | wc -l)
echo "‚úÖ R√©f√©rence au nouveau domaine: $messoins"

# Ancien branding supprim√©
old=$(grep -r "pharmaciecourcelles-demours-paris" pharmacie-campguezo-cotonou.messoins.bj/ 2>/dev/null | wc -l)
echo "‚úÖ Ancien domaine restant: $old"

# Ancien CDN supprim√©
cdn=$(grep -r "https://cdn\.mesoigner\.fr" pharmacie-campguezo-cotonou.messoins.bj/ 2>/dev/null | wc -l)
echo "‚úÖ Ancien CDN restant: $cdn"

# CSS existent
css1=$(test -f public/assets/css/scripts.3e902af8.css && echo "OUI" || echo "NON")
css2=$(test -f public/assets/css/mesoigner.6063c722.css && echo "OUI" || echo "NON")
echo "‚úÖ CSS scripts: $css1"
echo "‚úÖ CSS mesoigner: $css2"

echo ""
echo "========================================="
echo "R√âSUM√â"
echo "========================================="
if [ "$old" -eq 0 ] && [ "$cdn" -eq 0 ] && [ "$messoins" -gt 1000 ]; then
  echo "‚úÖ MIGRATION R√âUSSIE!"
else
  echo "‚ö†Ô∏è  V√©rifier les d√©tails ci-dessus"
fi
echo "========================================="
```

---

## üéâ Vous avez termin√©!

Si vous √™tes ici et que tout fonctionne:

1. ‚úÖ Migration compl√®te
2. ‚úÖ Tests r√©ussis
3. ‚úÖ Configuration v√©rifi√©e
4. ‚úÖ Pr√™t pour production

**Prochaine √©tape:** Deployment vers production!

---

## üìû Support

### Si vous avez encore des probl√®mes:

1. **V√©rifications rapides:**
   - `grep -r 'data-theme="messoins"'` doit retourner 1000+
   - `grep -r 'pharmaciecourcelles'` doit retourner 0
   - `php artisan serve` doit d√©marrer sans erreur

2. **V√©rifications navigateur (F12):**
   - Console: Aucune erreur rouge
   - Network: Aucun 404
   - Sources: Les fichiers CSS chargent

3. **Documentation:**
   - Voir `MIGRATION_COMPLETE_GUIDE.md` section "D√©pannage"
   - Voir les logs Laravel: `storage/logs/laravel.log`

---

**F√©licitations! Vous avez r√©ussi la migration! üéâ**
